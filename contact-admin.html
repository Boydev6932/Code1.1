<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö ‚Äî KNW Check</title>

  <!-- CSP (‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï img ‡∏à‡∏≤‡∏Å file: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö local ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£) -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' https: data: blob: file:; connect-src 'self'; font-src 'self'; object-src 'none'; base-uri 'none'; frame-ancestors 'none'; form-action 'self';">
  <meta name="referrer" content="strict-origin-when-cross-origin">

  <link rel="stylesheet" href="css/style.css">

  <!-- ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö standalone) -->
  <style>
    /* ‡∏ñ‡πâ‡∏≤ css/style.css ‡∏´‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ additions ‡∏ô‡∏µ‡πà‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ UI ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ */
    .hidden{ display:none !important; }

    /* ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ß‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö ‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å (additions) */
    .swap-controls{ display:flex; gap:10px; align-items:center; justify-content:center; margin-top:12px; }
    .swap-btn{
      padding:10px 14px; border-radius:12px; font-weight:800; border:2px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.04); color:#fff; cursor:pointer; box-shadow:0 12px 30px rgba(0,0,0,0.22);
      transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
    }
    .swap-btn:hover{ transform: translateY(-4px); box-shadow:0 18px 38px rgba(0,0,0,0.28); }
    .swap-btn:active{ transform: translateY(0); }
    .swap-btn.rotate{ background: linear-gradient(135deg,var(--accent1),var(--accent2)); border-color:transparent; box-shadow:0 12px 36px rgba(79,70,229,0.18); }
    .swap-btn.pulse{ animation:rotate-pulse .56s ease; }
    @keyframes rotate-pulse{ 0%{ transform: scale(1) } 50%{ transform: scale(1.04) } 100%{ transform: scale(1) } }

    .map-hint{ font-weight:700; color:#fff; opacity:0.95; margin-left:8px; font-size:0.95rem; }

    .contact-footer{ margin-top:18px; display:flex; justify-content:center; align-items:center; gap:12px; }
    .back-home{ display:inline-flex; align-items:center; gap:10px; text-decoration:none; font-weight:900; letter-spacing:.2px; padding:10px 16px; border-radius:9999px; color:#0b1020; background:#fff; box-shadow:0 16px 40px rgba(0,0,0,.25), inset 0 0 0 2px rgba(255,255,255,.4); }
    .back-home .ico{ font-size:1.1rem; }

    @media (max-width:420px){
      .swap-controls{ flex-direction:column; gap:8px; }
      .swap-btn{ width:100%; }
      .qr-wrap{ width:84vw; height:84vw; }
    }

    /* sr-only (accessibility) */
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
  </style>
</head>
<body class="contact">
  <div class="overlay contact-main">
    <div class="card contact-card" aria-labelledby="contact-heading">
      <div class="logos" aria-hidden="false">
        <!-- ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å -->
        <img src="https://i0.wp.com/knw.ac.th/wp-content/uploads/2024/12/%E0%B9%81%E0%B8%81%E0%B9%88%E0%B8%99%E0%B8%99%E0%B8%84%E0%B8%A3%E0%B8%A7%E0%B8%B4%E0%B8%97%E0%B8%A2%E0%B8%B2%E0%B8%A5%E0%B8%B1%E0%B8%A2-Logo-PNG-color.png?resize=947%2C949&ssl=1"
             alt="‡πÇ‡∏•‡πÇ‡∏Å‡πâ ‡πÅ‡∏Å‡πà‡∏ô‡∏ô‡∏Ñ‡∏£‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢" width="70" height="70" loading="lazy" decoding="async">
        <img src="https://scontent.fkkc3-1.fna.fbcdn.net/v/t1.15752-9/532944842_2000679387359224_5786569609575666025_n.png"
             alt="‡πÇ‡∏•‡πÇ‡∏Å‡πâ ROTC" width="60" height="80" loading="lazy" decoding="async">
      </div>

      <main class="container">
        <section>
          <h2 id="contact-heading" class="contact-heading">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•</h2>

          <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏° (IG / FB / LINE) -->
          <div class="card-actions" role="group" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°">
            <button class="btn btn-ghost active" data-show-qr="ig" aria-pressed="true">‡πÅ‡∏™‡∏î‡∏á QR ‚Äî Instagram</button>
            <button class="btn btn-ghost" data-show-qr="fb" aria-pressed="false">‡πÅ‡∏™‡∏î‡∏á QR ‚Äî Facebook</button>
            <button class="btn btn-ghost" data-show-qr="line" aria-pressed="false">‡πÅ‡∏™‡∏î‡∏á QR ‚Äî LINE</button>
          </div>

          <div class="qr-display" aria-live="polite">
            <div id="qr-wrap" class="qr-wrap ig" aria-hidden="false">
              <!-- ‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å assets/ ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß -->
              <!-- Required assets (place these files in assets/):
                   - qr-instagram.png
                   - qr-facebook.png
                   - qr-line.png
              -->
              <img id="contact-qr-img" class="qr-img" src="assets/qr-instagram.png" alt="QR Code ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•" width="300" height="300" loading="lazy" decoding="async">
            </div>

            <div class="qr-caption">‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏ä‡∏ó ‚Äî <span id="qr-platform-label">Instagram</span></div>
            <div class="qr-hint-block muted-badge">‡∏™‡πÅ‡∏Å‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏≠‡∏î/‡πÅ‡∏ä‡∏ó</div>

            <div class="qr-extra">
              <div class="k">‡∏´‡∏≤‡∏Å‡∏™‡πÅ‡∏Å‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î ‡πÉ‡∏´‡πâ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠ IG : <strong>_littleboy555</strong></div>
              <div class="k">Facebook : <strong>Kungbang Konkaew</strong></div>
              <div class="k">Line Id : <strong>kungbang2435</strong></div>
            </div>

            <!-- === ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö (‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ / ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ / ‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏ó‡∏±‡πâ‡∏á‡∏ä‡∏∏‡∏î) === -->
            <div class="swap-controls" role="group" aria-label="‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡∏™‡∏•‡∏±‡∏ö QR">
              <button id="qr-prev" class="swap-btn" title="‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ (Arrow Left)" aria-label="‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤">‚Äπ ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
              <button id="qr-next" class="swap-btn" title="‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (Arrow Right)" aria-label="‡∏ñ‡∏±‡∏î‡πÑ‡∏õ">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Ä∫</button>
              <button id="qr-rotate" class="swap-btn rotate" title="‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà QR ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏´‡∏°‡∏∏‡∏ô)" aria-label="‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà QR">üîÅ ‡∏™‡∏•‡∏±‡∏ö‡∏ä‡∏∏‡∏î</button>

              <div id="map-hint" class="map-hint sr-only" aria-live="polite"></div>
            </div>

            <div id="qr-fallback" class="qr-fallback hidden" role="status" aria-hidden="true" style="margin-top:12px;">
              <div class="muted small" style="color:rgba(255,255,255,0.95); font-weight:700;">
                ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏†‡∏≤‡∏û QR ‚Äî ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà <code>assets/qr-*.png</code>
              </div>
            </div>

          </div>

        </section>
      </main>

      <footer class="site-footer">
        <div class="contact-footer">
          <a class="back-home" href="index.html" id="back-home" aria-label="‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å">
            <span class="ico" aria-hidden="true">üè†</span>
            <span>‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</span>
          </a>
        </div>
        <small style="display:block; margin-top:12px; color:rgba(255,255,255,0.9);">¬© <span id="year"></span> KNW Check ‚Ä¢ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•</small>
      </footer>
    </div>
  </div>

  <!-- JavaScript: ‡∏ß‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏¥‡∏î body ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ DOM ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô -->
  <script>
  (function(){
    // ‡πÉ‡∏™‡πà‡∏õ‡∏µ
    const yearEl = document.getElementById('year');
    if (yearEl) yearEl.textContent = new Date().getFullYear();

    // Paths & candidates: **‡∏ß‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏•‡∏á‡πÉ‡∏ô assets/**
    const PATHS = ['assets/'];
    const FILE_CANDIDATES = {
      ig:   ['qr-instagram.png','qr-instagram.PNG','qr_instagram.png','qr-instagram.jpg'],
      fb:   ['qr-facebook.png','qr-facebook.PNG','qr_facebook.png','qr-facebook.jpg'],
      line: ['qr-line.png','qr-line.PNG','qr_line.png','qr-line.jpg']
    };

    const PLATFORMS = ['ig','fb','line'];

    const IMG = document.getElementById('contact-qr-img');
    const FBACK = document.getElementById('qr-fallback');
    const WRAP = document.getElementById('qr-wrap');
    const PLATFORM_LABEL = document.getElementById('qr-platform-label');
    const MAP_HINT = document.getElementById('map-hint');

    // rotation mapping: 0 = identity, 1 = shift right (ig->fb->line->ig), 2 = shift twice
    let mappingRotation = 0;

    // cancellation guard for async image checks
    let latestSetId = 0;

    function showFallback(){ if (IMG) IMG.style.display='none'; if (FBACK) { FBACK.classList.remove('hidden'); FBACK.setAttribute('aria-hidden','false'); } }
    function hideFallback(){ if (FBACK) { FBACK.classList.add('hidden'); FBACK.setAttribute('aria-hidden','true'); } if (IMG) IMG.style.display=''; }

    function testSrc(src){
      return new Promise(resolve=>{
        const t = new Image();
        t.onload = ()=>resolve({ok:true,src});
        t.onerror = ()=>resolve({ok:false,src});
        // add cache-busting small token if needed: omit for now
        t.src = src;
      });
    }

    async function findWorkingSrc(platformKey){
      const idx = PLATFORMS.indexOf(platformKey);
      const mappedKey = PLATFORMS[(idx + mappingRotation) % PLATFORMS.length];
      const names = FILE_CANDIDATES[mappedKey] || FILE_CANDIDATES.ig;
      const tries = [];
      PATHS.forEach(p => names.forEach(n => tries.push(p + n)));

      for (const s of tries){
        try{
          const r = await testSrc(s);
          if (r.ok) return r.src;
        }catch(e){ /* ignore */ }
      }
      return null;
    }

    function updatePlatformButtons(activeKey){
      document.querySelectorAll('[data-show-qr]').forEach(btn=>{
        const on = btn.dataset.showQr === activeKey;
        btn.classList.toggle('active', on);
        btn.setAttribute('aria-pressed', on ? 'true' : 'false');
      });
    }

    function labelFor(key){ return key==='ig' ? 'Instagram' : key==='fb' ? 'Facebook' : 'LINE'; }

    async function setPlatform(key){
      const myId = ++latestSetId;
      updatePlatformButtons(key);
      if (PLATFORM_LABEL) PLATFORM_LABEL.textContent = labelFor(key);
      if (WRAP) WRAP.className = 'qr-wrap ' + (key==='ig' ? 'ig' : key==='fb' ? 'fb' : 'line');

      hideFallback();

      // subtle loading state
      if (IMG){ IMG.style.opacity = '0.6'; IMG.style.filter = 'blur(1px) grayscale(.02)'; }

      const src = await findWorkingSrc(key);

      // abort if another call happened
      if (myId !== latestSetId) return;

      if (src){
        if (IMG){
          IMG.src = src;
          IMG.alt = 'QR Code ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏• (' + labelFor(key) + ')';
          IMG.style.display = '';
          IMG.style.opacity = '';
          IMG.style.filter = '';
        }
        if (FBACK) FBACK.classList.add('hidden');
      } else {
        if (IMG) IMG.style.opacity = '';
        if (FBACK) FBACK.classList.remove('hidden');
        if (IMG) IMG.style.display = 'none';
      }

      // announce mapping for assistive tech (kept in sr-only)
      if (MAP_HINT){
        const mapped = PLATFORMS.map((p,i)=> p + '‚Üí' + PLATFORMS[(i + mappingRotation) % PLATFORMS.length]);
        MAP_HINT.textContent = '‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ: ' + mapped.map(m=> {
          const parts = m.split('‚Üí');
          return (parts[0] === 'ig' ? 'IG' : parts[0] === 'fb' ? 'FB' : 'LINE') + '‚Üí' + (parts[1] === 'ig' ? 'IG' : parts[1] === 'fb' ? 'FB' : 'LINE');
        }).join(', ');
      }
    }

    // helpers for cycling
    function nextKey(current){ const i = PLATFORMS.indexOf(current); return PLATFORMS[(i + 1) % PLATFORMS.length]; }
    function prevKey(current){ const i = PLATFORMS.indexOf(current); return PLATFORMS[(i - 1 + PLATFORMS.length) % PLATFORMS.length]; }

    // Wire events
    let currentKey = 'ig';

    document.querySelectorAll('[data-show-qr]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const key = btn.dataset.showQr;
        currentKey = key;
        setPlatform(key);
      });
    });

    const btnNext = document.getElementById('qr-next');
    const btnPrev = document.getElementById('qr-prev');
    const btnRotate = document.getElementById('qr-rotate');

    if (btnNext){ btnNext.addEventListener('click', ()=>{ currentKey = nextKey(currentKey); setPlatform(currentKey); btnNext.focus(); }); }
    if (btnPrev){ btnPrev.addEventListener('click', ()=>{ currentKey = prevKey(currentKey); setPlatform(currentKey); btnPrev.focus(); }); }

    if (btnRotate){ btnRotate.addEventListener('click', ()=>{
      mappingRotation = (mappingRotation + 1) % PLATFORMS.length;
      setPlatform(currentKey);
      btnRotate.classList.add('pulse');
      setTimeout(()=> btnRotate.classList.remove('pulse'), 600);
      btnRotate.focus();
    }); }

    // keyboard nav
    document.addEventListener('keydown', (e)=>{
      if (e.key === 'ArrowRight'){
        currentKey = nextKey(currentKey); setPlatform(currentKey);
      } else if (e.key === 'ArrowLeft'){
        currentKey = prevKey(currentKey); setPlatform(currentKey);
      } else if (e.key && e.key.toLowerCase() === 'r'){
        mappingRotation = (mappingRotation + 1) % PLATFORMS.length; setPlatform(currentKey);
      }
    });

    // initial render
    setPlatform('ig');

    // expose for debugging / programmatic control
    window._knw_setQR = setPlatform;
    window._knw_rotateMapping = function(steps){ mappingRotation = ((mappingRotation||0) + (steps||1)) % PLATFORMS.length; setPlatform(currentKey); };

  })();
  </script>
</body>
</html>
